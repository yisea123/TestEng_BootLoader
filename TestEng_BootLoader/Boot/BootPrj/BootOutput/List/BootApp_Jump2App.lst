###############################################################################
#
# IAR ANSI C/C++ Compiler V7.20.2.7424/W32 for ARM        23/Jun/2019  15:46:48
# Copyright 1999-2014 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootApp\src\BootApp_Jump2App.c
#    Command line =  
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootApp\src\BootApp_Jump2App.c
#        -lcN
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\BootOutput\List\
#        -lb
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\BootOutput\List\
#        -o
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\BootOutput\Obj\
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M3 -e --fpu=None --dlib_config "E:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        7.0\arm\INC\c\DLib_Config_Normal.h" -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\BootApp\inc\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\BootDrv\inc\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\BootOth\inc\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\..\Libraries\CMSIS\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\..\Libraries\STM32F10x_StdPeriph_Driver\inc\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\modbus\ascii\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\modbus\include\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\modbus\modbus_port\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\modbus\rtu\
#        -I
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\..\modbus\tcp\
#        -On -I "E:\Program Files (x86)\IAR Systems\Embedded Workbench
#        7.0\arm\CMSIS\Include\"
#    List file    =  
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\BootOutput\List\BootApp_Jump2App.lst
#    Object file  =  
#        F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootPrj\BootOutput\Obj\BootApp_Jump2App.o
#
###############################################################################

F:\FLT\GitHub\TestEng_BootLoader\TestEng_BootLoader\Boot\BootApp\src\BootApp_Jump2App.c
      1          /*<BASDKey>
      2           **********************************************************************************************************************
      3           *
      4           * COPYRIGHT RESERVED, FeedLiTech, 2019. All rights reserved.
      5           * The reproduction, distribution and utilization of this document as well as the communication of its contents to
      6           * others without explicit authorization is prohibited. Offenders will be held liable for the payment of damages.
      7           * All rights reserved in the event of the grant of a patent, utility model or design.
      8           *
      9           **********************************************************************************************************************
     10          </BASDKey>*/
     11          
     12          #include "BootApp_Cfg.h"
     13          #include "BootApp_Cfg_Board.h"
     14          #include "BootApp_Type.h"
     15          #include "BootApp_Priv.h"
     16          
     17          void BootApp_Run_App(void)
     18          {
     19          #if (BOOTAPP_BOARD_SUPPORT == TestEng_Debug)
     20              ;
     21          #else
     22          
     23                if(((*(uint32_t*)BOOTAPP_APP_START_ADDR)&0x2FFE0000)==0x20000000)
     24                {
     25                    //__set_PSP(*(volatile uint32_t*) BOOTAPP_APP_START_ADDR);
     26                    //__set_CONTROL(0);
     27                    __set_MSP(*(volatile uint32_t*) BOOTAPP_APP_START_ADDR);
     28                    NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0xC000);
     29                    ((*((ptf)(BOOTAPP_APP_START_ADDR + 4)))());
     30                }
     31            
     32          #if 0
     33            TIM_ITConfig(TIM4,TIM_IT_Update,DISABLE);
     34            TIM_Cmd(TIM4, DISABLE);
     35            USART_DeInit(USART1);
     36            USART_DeInit(USART2);
     37            USART_ITConfig(USART1, USART_IT_RXNE, DISABLE);
     38            USART_ITConfig(USART1, USART_IT_TXE, DISABLE);
     39            USART_ITConfig(USART2, USART_IT_RXNE, DISABLE);
     40            USART_ITConfig(USART2, USART_IT_TXE, DISABLE);
     41            Delay_ms(10);
     42            
     43            __disable_irq();
     44            ptf app_main;
     45            if(((*(uint32_t*)BOOTAPP_APP_START_ADDR)&0x2FFE0000)==0x20000000)
     46            {
     47                __set_MSP(*(volatile uint32_t*)BOOTAPP_APP_START_ADDR);
     48                app_main = (ptf)(volatile uint32_t *)(BOOTAPP_APP_START_ADDR + 4);
     49                app_main();
     50                //((*((ptf)(BOOTAPP_APP_START_ADDR + 4)))());
     51            }
     52          #endif
     53          
     54          #endif
     55          }
     56          
     57          
     58          /*<BASDKey>
     59           ***********************************************************************************************************************
     60           * $History___:
     61           *
     62           * U1.0.0;      20.05.2019 new created for BootLoader he.huang@feedlitech.com
     63           *
     64           * $
     65           ***********************************************************************************************************************
     66          </BASDKey>*/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   BootApp_Run_App
         8   -- Indirect call
         8   -> NVIC_SetVectorTable


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      56  BootApp_Run_App

 
 56 bytes in section .text
 
 56 bytes of CODE memory

Errors: none
Warnings: none
